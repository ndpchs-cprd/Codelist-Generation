# User Instructions for Medical Condition Codelist Script

This guide provides step-by-step instructions on how to use the script for generating and combining codelists based on medical conditions.

The medical codelist generator is located within the folder " \\Codelist_Generator\\Codelist Generation Scripts\\Codelist Generator\\Codelist_Generator_20240411.ipynb"

This is a Jupyter notebook file and can be opened with Jupyter Notebooks.

Once opened it is important to set up our sources. Currently there are 5 sources to be used initially:

The codelist repositories which will be unique to where you have stored the source file but follow this format and location within the Codelist Generator folder:

- AIM_RSF: " C:\\Users\\Example\\Codelist_Generator\\Codelist Generation Scripts\\Sources\\AIM_RSF_Codelist_Source"
- HDR_UK: " C:\\Users\\Example\\Codelist_Generator\\Codelist Generation Scripts\\Sources\\HDRUK_Codelist_Source"
- CALIBER_Mapped: "C:\\Users\\Example\\Codelist_Generator\\Codelist Generation Scripts\\Sources\\CALIBER_Mapped_Source"
- PCD_Refset: "C:\\Users\\Example\\Codelist_Generator\\Codelist Generation Scripts\\Sources\\PCD_Refset_Codelist_Source_20240411"

Note: these are at FOLDER level. A quick tip is to Shift + Right Click on the FOLDER for each source and select option to “Copy as path”.

These are change in cell 1 line 12 and should look as follows: ![A computer screen shot of a computer code

![image](https://github.com/ndpchs-cprd/Codelist-Generation/assets/167761988/6c2fa777-6a99-40c7-affe-39d352c9d139)

And the EMIS medical dictionary:

- EMIS Dictionary: "C:\\Users\\Example\\Codelist_Generator\\Codelist Generation Scripts\\Sources\\EMIS Medical Dictionary\\202202_EMISMedicalDictionary_Alpha.txt"

Note: these are at the FILE level. A quick tip is to Shift + Right Click on the FILE indicated for the source and select option to “Copy as path”.

This is changed in cell 8 line 3 and should look as follows: ![A screen shot of a computer

![image](https://github.com/ndpchs-cprd/Codelist-Generation/assets/167761988/560369b1-8175-48fb-b127-abb953857c78)


## Preparing the Environment

#### Step 1: Create an Output Folder

Before running the script, you need to set up an output folder where all the CSV files generated by the script will be saved.

1. Navigate to the desired location on your computer or server.
2. Create a new folder and name it appropriately, e.g., **Codelists_Depression_Project**.
3. Note the full path of this folder, as you will need to enter it into the script.

#### Step 2: Configure the Script

Open the script in your preferred text editor or Integrated Development Environment (IDE).

1. Locate the **output_folder** variable at the beginning of the script.
2. Set its value to the path of the output folder you created, e.g.:

##### Example

##### output_folder = r"C:\\Path\\To\\Codelists_Depression_Project"

Ensure that you use raw string notation (prefix the string with 'r') to avoid issues with escape characters in the file path.

## Running the Script

#### Step 1: Set Search Terms

Determine the medical condition or conditions you want to search for.

1. In the script, locate the **search_terms** variable.
2. Replace the existing list with your search terms. For example:

##### Example

##### search_terms = \['Asthma', 'Bronchitis'\]

_Note: it is recommended with this script to only search for a single condition at a time unlike the term search script._

#### Step 2: Execute the Script

Run the script in your Python environment. The script will perform searches across the predefined data sources and generate CSV files for each search term in your output folder.

### Reviewing and Combining Results

#### Step 1: Check Individual Codelists

Navigate to your output folder to view the CSV files generated for each search term.

#### Step 2: Review Combined Codelists

The script will also create a combined CSV file containing all search results, with duplicates removed.

## Troubleshooting

If you encounter any issues:

- Verify that the paths to the data sources and output folder are correct.
- Ensure that your search terms are spelled correctly.
- Check that you have the necessary permissions to read from the data sources and write to the output folder.
